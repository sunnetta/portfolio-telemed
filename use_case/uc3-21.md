## UC-3.21 Создать отзыв

|**ID:** UC-3.21|
|-|
|**Автор**: Команда Телемед|
|**Название:** Создать отзыв|
|**Действующее лицо:** Пациент|
|**Предусловия:** Пользователь находится на форме карточки консультации
**Триггер:** У пациента только что завершилась консультация
**Постусловие:** -|
|**Основной поток:** 
   
1. Система предлагает создать отзыв
2. Пользователь даёт команду создать отзыв
3. Система отображает форму обратной связи со следующими полями
  - Оценка
  - Текстовый отзыв
4. Пользователь вводит данные в форму обратной связи
5. Пользователь дает команду сохранить отзыв
6. Система убеждается в полноте данных
7. Система убеждается в корректности данных
8. Система сохраняет отзыв
9. Система редактирует атрибут [Консультация]:
   - естьОтзыв = True
10. Система сообщает о успешном завершении операции
11. Сценарий окончен|
|**Расширение**:

3а. Пользователь не даёт команду создать отзыв.
  3а1. Система редактирует атрибут [Консультация]:
    - естьОтзыв = False.
  3а2. Система сообщает пользователю о возможности оставить отзыв в течение 1 недели с момента завершения консультации.
  3а3. Система убеждается, что с момента завершения консультации прошло < 1 недели.
      3а3а. Система убедилась, что с момента завершения консультации прошло >= 1 недели.
        3а3а1. Система не даёт возможность создать отзыв.
        3а3а2. Сценарий окончен.
  3а4. Система даёт возможность создать отзыв.
  3а5. Сценарий переходит к шагу 1.

6а. Пользователь ввёл не все обязательные поля формы.
  6а1. Система сообщает о том, что не все поля заполнены.
  6а2. Система даёт возможность ввести данные заново.
  6а3. Сценарий переходит к шагу 4.

7а. Пациент ввёл некорректные данные
  7а1. Система убеждается, что пользователь ввёл недопустимое количество символов в поле [Отзыв]:Комментарий.
  7а2. Система сообщает пользователю о допустимом количестве символов.
  7а3. Система даёт возможность ввести данные заново.
  7а4. Сценарий переходит к шагу 4.

9а. Система не сохранила отзыв.
  9а1. Система сообщает пользователю об ошибке при сохранении отзыва.
  9а2. Сценарий окончен
|